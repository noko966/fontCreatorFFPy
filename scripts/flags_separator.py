from PIL import Image
import os

# Load the sprite sheet
sprite_sheet_path = "scripts/data/flags.png"
sprite_sheet = Image.open(sprite_sheet_path)

# Ensure the output directory exists
output_dir = "scripts/data/sprites"
os.makedirs(output_dir, exist_ok=True)

# Define the size of each sprite
sprite_width, sprite_height = 24, 24

# Define the CSS background positions for the sprites
background_positions = {
    "f77": [0, 0],
    "f78": [0, -24],
    "f81": [0, -48],
    "f162430": [0, -72],
    "f82": [0, -96],
    "f83": [0, -120],
    "f84": [0, -144],
    "f85": [0, -168],
    "f72": [0, -192],
    "f73": [0, -216],
    "f74": [0, -240],
    "f90": [0, -264],
    "f88": [0, -288],
    "f89": [0, -312],
    "f91": [0, -336],
    "f92": [0, -360],
    "f160999": [0, -384],
    "f345425": [-24, -384],
    "f94": [0, -408],
    "f95": [0, -432],
    "f96": [0, -456],
    "f97": [0, -480],
    "f98": [0, -504],
    "f93": [0, -528],
    "f154175": [0, -552],
    "f128": [0, -576],
    "f129": [0, -600],
    "f210": [0, -624],
    "f134": [0, -648],
    "f135": [0, -672],
    "f136": [0, -696],
    "f137": [0, -720],
    "f207": [0, -744],
    "f138": [0, -768],
    "f132": [0, -792],
    "f209": [0, -816],
    "f111": [0, -840],
    "f112": [0, -864],
    "f214": [0, -888],
    "f114": [0, -912],
    "f178": [0, -936],
    "f80": [0, -960],
    "f215": [0, -984],
    "f157678": [0, -1008],
    "f113": [0, -1032],
    "f203": [0, -1056],
    "f205": [0, -1080],
    "f206": [0, -1104],
    "f110": [0, -1128],
    "f105": [0, -1152],
    "f103": [0, -1176],
    "f106": [0, -1200],
    "f109": [0, -1224],
    "f104": [0, -1248],
    "f107": [0, -1272],
    "f108": [0, -1296],
    "f100": [0, -1320],
    "f123": [0, -1344],
    "f117": [0, -1368],
    "f118": [0, -1392],
    "f121": [0, -1416],
    "f120": [0, -1440],
    "f122": [0, -1464],
    "f116": [0, -1488],
    "f125": [0, -1512],
    "f222": [0, -1536],
    "f223": [0, -1560],
    "f119": [0, -1584],
    "f127": [0, -1608],
    "f131": [0, -1632],
    "f178686": [0, -1656],
    "f139": [0, -1680],
    "f140": [0, -1728],
    "f141": [0, -1752],
    "f142": [0, -1776],
    "f143": [0, -1800],
    "f144": [0, -1824],
    "f145": [0, -1848],
    "f163784": [0, -1872],
    "f146": [0, -1896],
    "f147": [0, -1920],
    "f159746": [0, -1944],
    "f149": [0, -1968],
    "f154": [0, -2016],
    "f167805": [0, -2040],
    "f208": [0, -2064],
    "f150": [0, -2088],
    "f153": [0, -2112],
    "f155": [0, -2136],
    "f156": [0, -2160],
    "f158": [0, -2184],
    "f160": [0, -2208],
    "f164597": [0, -2232],
    "f157": [0, -2256],
    "f161": [0, -2280],
    "f157628": [0, -5232],
    "f157629": [0, -5232],
    "f164": [0, -2328],
    "f165": [0, -2352],
    "f166": [0, -2376],
    "f167": [0, -2400],
    "f168": [0, -2424],
    "f169": [0, -2448],
    "f204": [0, -2472],
    "f171": [0, -2496],
    "f170": [0, -2496],
    "f172": [0, -2520],
    "f173": [0, -2544],
    "f130": [0, -2568],
    "f176": [0, -2592],
    "f174": [0, -2616],
    "f175": [0, -2640],
    "f179": [0, -2664],
    "f177": [0, -2688],
    "f180": [0, -2688],
    "f213": [0, -2712],
    "f117033": [0, -2736],
    "f183": [0, -2760],
    "f184": [0, -2784],
    "f186": [0, -2808],
    "f187": [0, -2832],
    "f216": [0, -2856],
    "f21": [0, -2880],
    "f220": [0, -2880],
    "f221": [0, -2880],
    "f219": [0, -2904],
    "f124": [0, -2928],
    "f168109": [0, -2952],
    "f150590": [0, -2976],
    "f212": [0, -3000],
    "f211": [0, -3024],
    "f185": [0, -3048],
    "f175063": [0, -3072],
    "f191": [0, -3096],
    "f189": [0, -3120],
    "f193": [0, -3144],
    "f194": [0, -3168],
    "f196": [0, -3192],
    "f195": [0, -3216],
    "f197": [0, -3240],
    "f200": [0, -3264],
    "f199": [0, -3264],
    "f99": [0, -3288],
    "f188": [0, -3312],
    "f201": [0, -3336],
    "f198": [0, -3360],
    "f101": [0, -3384],
    "f102": [0, -3408],
    "f202": [0, -3432],
    "f126": [0, -3456],
    "f115": [0, -3480],
    "f87": [0, -3552],
    "f15": [0, -3552],
    "f76": [0, -3504],
    "f86": [0, -4034],
    "f79": [0, -4056],
    "f75": [0, -3504],
    "f205550": [0, -4080],
    "f181": [0, -3504],
    "f182": [0, -3600],
    "f163": [-24, -264],
    "f217": [0, -3528],
    "f151": [0, -1992],
    "f8": [0, -3552],
    "f159": [0, -3552],
    "f360247": [-23, -336],
    "f162": [0, -3576],
    "f194348": [0, -3624],
    "f192825": [0, -3648],
    "f159": [0, -3672],
    "f133": [0, -3696],
    "f153424": [0, -3720],
    "f221797": [0, -3744],
    "f148": [0, -3768],
    "f192609": [0, -3840],
    "f191778": [0, -3864],
    "f190": [0, -3888],
    "f218572": [0, -3912],
    "f269102": [0, -3936],
    "f300147": [0, -3960],
    "f301347": [0, -3984],
    "f251264": [0, -3936],
    "f227248": [0, -4008],
    "f211524": [-24, -24],
    "f211526": [-24, -120],
    "f211525": [-24, 0],
    "f211527": [-24, -48],
    "f211528": [-24, -144],
    "f2877": [-24, -360],
    "f211529": [-24, -96],
    "f211530": [-24, -72],
    "f211532": [-24, -168],
    "f249061": [0, -3792],
    "f252906": [0, -3816],
    "f2459": [0, -4008],
    "f2459": [0, -4008],
    "f306716": [0, -4104],
    "f313153": [0, -4128],
    "f345534": [-24, -310],
    "f384246": [0, -4152],
    "f375265": [0, -4176],
    "f380627": [0, -4200],
    "f310630": [0, -4224],
    "f330686": [0, -4248],
    "f330687": [0, -4272],
    "f211531": [0, -4320],
    "f410725": [0, -4344],
    "f375122": [0, -4392],
    "f368333": [0, -4416],
    "f2694": [0, -4416],
    "f2843": [0, -4416],
    "f256652": [0, -4440],
    "f364752": [0, -4464],
    "f410741": [0, -4488],
    "f364753": [0, -4512],
    "f330697": [0, -4536],
    "f370979": [0, -4560],
    "f371216": [0, -4584],
    "f211527": [0, -4608],
    "f318836": [0, -4632],
    "f330688": [0, -4656],
    "f330690": [0, -4680],
    "f330691": [0, -4704],
    "f330692": [0, -4728],
    "f330693": [0, -4752],
    "f330694": [0, -4776],
    "f330695": [0, -4800],
    "f330696": [0, -4824],
    "f367228": [0, -4848],
    "f378278": [0, -4872],
    "f410724": [0, -4896],
    "f410740": [0, -4920],
    "f410746": [0, -4944],
    "f410748": [0, -4968],
    "f410749": [0, -4992],
    "f410750": [0, -5016],
    "f2830": [0, -5040],
    "f41476": [0, -5040],
    "f269562": [0, -5064],
    "f320642": [0, -5088],
    "f429707": [0, -5112],
    "f2874": [0, -5136],
    "f473568": [0, -5160],
    "f416739": [0, -5184],
    "f2870": [0, -5208],
    "f442885": [0, -5256],
    "f439512": [0, -5280],
    "f382377": [0, -5304],
    "f494968": [0, -5328],
    "f317857": [0, -5352],
    "f363453": [-24, -408],
    "f3126": [-24, -432],
    "f491910": [-24, -456],
    "f431288": [-24, -480],
    "f56289": [-24, -504],
    "f3085": [-24, -504],
    "f508883": [-24, -528],
    "f390057": [-24, -552],
    "f3194": [-24, -576],
    "f677709": [-24, -600],
    "f522433": [-24, -624],
    "f68": [-24, -648],
    "f69": [-24, -672],
    "f71": [-24, -696],
    "f662271": [0, -5496],
    "f562813": [0, -5376],
    "f562815": [0, -5400],
    "f562814": [0, -5424],
    "f2524": [0, -5448],
    "f593441": [0, -5472],
    "f695275": [0, -5496],
}


# Function to crop a sprite from the sprite sheet
def crop_sprite(sheet, position, key, output_directory):
    # x, y = position
    print(key, ": ", position)
    x = position[0]
    y = position[1]
    # Since y is negative in CSS, we take the absolute value to get the positive y-coordinate
    y = abs(y)
    box = (x, y, x + sprite_width, y + sprite_height)
    sprite = sheet.crop(box)
    sprite.save(os.path.join(output_directory, f"{key}.png"))


# Crop and save each sprite
for key, position in background_positions.items():
    crop_sprite(sprite_sheet, position, key, output_dir)

print("Sprites have been extracted and saved.")
